<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
  <meta charset="UTF-8">
  <title>Integrate WhatsApp</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

<div class="container mt-5">
  <h2 class="mb-4 text-center">Integrate WhatsApp</h2>

  <!-- ✅ Show success if already integrated -->
  <div th:if="${alreadyIntegrated}" class="alert alert-success text-center w-50 mx-auto">
    ✅ You have already integrated your WhatsApp number.
  </div>

  <!-- ❌ Show form and instructions only if not already integrated -->
  <div th:unless="${alreadyIntegrated}">

    <!-- Phone Number Form -->
    <form action="/save-phone" method="post" class="mb-5 w-50 mx-auto">
      <div class="mb-3">
        <label for="phoneNumber" class="form-label">Enter your WhatsApp number (e.g., +91XXXXXXXXXX)</label>
        <input type="text" name="phoneNumber" id="phoneNumber" class="form-control" placeholder="+91XXXXXXXXXX" required>
      </div>
      <div class="text-center">
        <button type="submit" class="btn btn-success">Save Number</button>
      </div>
      <p th:if="${msg}" class="alert alert-info mt-4" th:text="${msg}"></p>
    </form>

    <!-- Instructions Section with Larger QR Image -->
    <div class="d-flex justify-content-center align-items-start gap-4 mt-4">

      <!-- Text Instructions -->
      <div class="alert alert-info w-50">
        <h5>📲 How to Complete WhatsApp Integration:</h5>
        <ol>
          <li>Save the number <strong>+1 415 523 8886</strong> in your phone.</li>
          <li>Send this message on WhatsApp to that number: <br>
            <code>join cow-garage</code>
          </li>
          <li>Once you send this message, you're opted-in and can start receiving messages!</li>
        </ol>
      </div>

      <!-- Vertical OR Separator -->
      <div class="d-flex flex-column align-items-center justify-content-center mx-2">
        <div style="height: 40px; border-left: 1px solid #ccc;"></div>
        <div style="font-weight: bold;">OR</div>
        <div style="height: 40px; border-left: 1px solid #ccc;"></div>
      </div>

      <!-- QR Code Image -->
      <div class="text-center">
        <img src="/images/whatsapp_QR.png" alt="WhatsApp Join QR" class="img-fluid rounded border" style="max-width: 300px;" />
      </div>
    </div>

  </div> <!-- End unless already integrated -->

</div>
</body>
</html>
